<!DOCTYPE html>
<html lang="en">

<head>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/app/int_styles.css' %}">
    <link rel="icon" href="{% static 'images/app/icon.png' %}">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <title>{{ blogger.name }} | Key Blogs</title>
</head>

<body>
    <div id="navbar" class="navbarpro">
        <a href="{% url 'logout' %}"><span class="material-icons">logout</span></a>
        <a href="{% url 'view_account' user.username 'blogs' %}"><span class="material-icons">settings</span></a>
        <a href="{% url 'view_blogs' %}"><span class="material-icons">home</span></a>
    </div>

    <div class="account"><br/>
        <div class="acc-dp">
            <center><img src="/media/{{ blogger.dp }}"></center>
        </div>
        <div class="acc-dtl">
            <center><h2>{{ blogger.name }}</h2></center>
            <center><y>{{ blogger.username }} &nbsp; 
            {% if blogger == user %}
                <b>|</b> &nbsp; {{ blogger.email }}</y></center><br/>
            {% endif %}
            <center><z>{{ blogger.bio }}</z></center><br/>
            <div class="acc-ctrl">
                {% if blogger == user %}
                    <a href="{% url 'edit_account' blogger.username %}" class="ctrl-edit"><button>Edit Account</button></a>
                    <a href="{% url 'delete_account' %}" class="ctrl-delete"><button>Delete Account</button></a>
                {% else %}
                    {% if user in blogger.followers.all %}
                        <a href="{% url 'follow_account' blogger.username %}" class="ctrl-edit"><button>Unfollow</button></a>
                    {% else %}
                        <a href="{% url 'follow_account' blogger.username %}" class="ctrl-edit"><button>Follow</button></a>
                    {% endif %}
                {% endif %}
            </div><br/><br/><br/><br/>
        </div>


        {% if panel == 'blogs' %}
            <div class="acc-panel">
                <a href="{% url 'view_account' blogger.username 'blogs' %}" 
                   style="border-bottom: 0.5vh solid indigo;">
                   <b>Blogs</b>
                </a>
                <a href="{% url 'view_account' blogger.username 'followers' %}">Followers</a>
                <a href="{% url 'view_account' blogger.username 'following' %}">Following</a>
            </div>
            <hr>
            {% if blogger.blog_set.all %}
                {% for blog in blogger.blog_set.all %}
                <div class="acc-panel-list">
                    <a href="/blogs/{{ blog.id }}">{{ blog.title }}</a>
                    {% if user in blog.likes.all %}
                        <a>ðŸ’™</a>
                        &nbsp; &nbsp; <z style="color: dodgerblue;">{{ blog.no_of_likes }}</z>
                    {% else %}
                        <a>ðŸ’œ</a>
                        &nbsp; &nbsp; <z style="color: black;">{{ blog.no_of_likes }}</z>
                    {% endif %}<hr class="acc-vara">
                </div>
                {% endfor %}
            {% endif %}
        {% endif %}


        {% if panel == 'followers' %}
            <div class="acc-panel">
                <a href="{% url 'view_account' blogger.username 'blogs' %}">Blogs</a>
                <a href="{% url 'view_account' blogger.username 'followers' %}" 
                   style="border-bottom: 0.5vh solid indigo;">
                   <b>Followers</b>
                </a>
                <a href="{% url 'view_account' blogger.username 'following' %}">Following</a>
            </div>
            <hr>
            {% if blogger.followers.all %}
                {% for follower in blogger.followers.all %}
                <div class="acc-panel-list">
                    <a href="{% url 'view_account' follower.username 'blogs' %}"><img src="/media/{{ follower.dp }}" align='left'>{{ follower.username }}</a>
                    {% if not follower == user %}
                        {% if follower in blogger.following.all %}
                            <a href="{% url 'follow_account' follower.username %}"><button>Unfollow</button></a>
                        {% else %}
                            <a href="{% url 'follow_account' follower.username %}"><button>Follow</button></a>
                        {% endif %}
                    {% endif %}<hr class="acc-vara">
                </div>
                {% endfor %}
            {% endif %}
        {% endif %}


        {% if panel == 'following' %}
            <div class="acc-panel">
                <a href="{% url 'view_account' blogger.username 'blogs' %}">Blogs</a>
                <a href="{% url 'view_account' blogger.username 'followers' %}">Followers</a>
                <a href="{% url 'view_account' blogger.username 'following' %}" 
                   style="border-bottom: 0.5vh solid indigo;">
                   <b>Following</b>
                </a>
            </div>
            <hr>
            {% if blogger.following.all %}
                {% for following in blogger.following.all %}
                <div class="acc-panel-list">
                    <a href="{% url 'view_account' following.username 'blogs' %}"><img src="/media/{{ following.dp }}" align='left'>{{ following.username }}</a>
                    {% if not following == user %}
                        {% if following in blogger.following.all %}
                            <a href="{% url 'follow_account' following.username %}"><button>Unfollow</button></a>
                        {% else %}
                            <a href="{% url 'follow_account' following.username %}"><button>Follow</button></a>
                        {% endif %}
                    {% endif %}<hr class="acc-vara">
                </div>
                {% endfor %}
            {% endif %}
        {% endif %}


    </div>

    <script src="{% static 'js/app/fixNavBar.js' %}"></script>
</body>

</html>